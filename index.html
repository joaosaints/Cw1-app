<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- calling scripts-->
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <script src="https://kit.fontawesome.com/348105537a.js" crossorigin="anonymous"></script>
    <script src="products.js" type="text/javascript"></script>
    <script defer src="script.js" type="text/javascript"></script>
    <title>After School Club</title>
</head>
<body>
    <div id="app">
        <header>
    <!-- Display website name and lesson page with disabled checkout button and 0 items in cart-->
            <h1 v-text="sitename"></h1>
            <div v-if="cart.length===0 && showLesson">
                <button disabled="true">
                    {{itemInTheCart}}
                    <span class="fa-solid fa-house"> Checkout</span>
                </button>
            </div>
            <div v-else>
                <!-- If items in cart are > than 0 checkout button is clickable and displays how many items in cart-->
                <button v-on:click="showCheckout" v-if="showLesson">
                    {{itemInTheCart}}
                    <span class="fa-solid fa-cart-shopping"> Checkout</span>
                </button>
                <!-- Button to return to lessons page, even if removed all items button stays clickable-->
                <button v-on:click="showCheckout" v-else>
                    <span class="fa-solid fa-house"> Back to home page</span>
                </button>
            </div>
        </header>
        <main>
            <!-- Display lesson page in case showLesson is true(variable starts with true value)-->
            <div v-if="showLesson">
                <br>
                <!-- search field with two-way binding for real time search but I couldn't get it working-->
                    <label for="searchBox">Search:</label>
                    <input type="text" id="searchBox" placeholder="Enter your search" v-model="searchInput" />
                <!-- Radio buttons for sorting, click one of the attributes and then the sorting order, two-way binding for real time sort -->
                <p>Sort:
                    <select v-model="sortOption">
                        <option value="price">Price</option>
                        <option value="subject">Subject</option>
                        <option value="location">Location</option>
                        <option value="availability">availablity</option>
                    </select>
                    <br>
                    <select v-model="sortOrder">
                        <option value="asc">Ascending</option>
                        <option value="desc">Descending</option>
                    </select>
            </p>
            <!-- if no sort option is clicked then the lesson will display by ID but if the options are selected it will show sorted-->
                <div v-if="sortOption2 ==='' && sortOption1===''">
                    <!-- displaying all lessons and it's values-->
                    <div v-for="product in searchedLessons">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <!-- if the lesson has any space available will add a lesson to the cart and take 1 from space, if 0 space in the lesson button is disabled-->
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <!-- if fields are less then 5 or 0 show different message-->
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting price ascending-->
                <div v-else-if="sortOption2==='priceR' && sortOption1==='asc'">
                    <div v-for="product in sortPriceL">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting price descending-->
                <div v-else-if="sortOption2==='priceR' && sortOption1==='desc'">
                    <div v-for="product in sortPriceH">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting name ascending-->
                <div v-else-if="sortOption2==='nameR' && sortOption1==='asc'">
                    <div v-for="product in sortNameL">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting name descending-->
                <div v-else-if="sortOption2==='nameR' && sortOption1==='desc'">
                    <div v-for="product in sortNameH">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting location ascending-->
                <div v-else-if="sortOption2==='locR' && sortOption1==='asc'">
                    <div v-for="product in sortLocL">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting location descending-->
                <div v-else-if="sortOption2==='locR' && sortOption1==='desc'">
                    <div v-for="product in sortLocH">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting space ascending-->
                <div v-else-if="sortOption2==='spaceR' && sortOption1==='asc'">
                    <div v-for="product in sortSpaceL">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
                <!-- sorting space descending-->
                <div v-else-if="sortOption2==='spaceR' && sortOption1==='desc'">
                    <div v-for="product in sortSpaceH">
                        <figure><img v-bind:src="product.image"></figure>
                        <h2>Subject: {{product.title}}</h2>
                        <p>Location: {{product.location}}</p>
                        <p>Price: £{{product.price}}</p>
                        <p>Spaces available: {{product.space}}</p>
                        <button v-if="lessonHaveSpace(product)" v-on:click="addItemToCart(product)">Add To The
                            Cart</button>
                        <button v-else disabled="true">Add To The Cart</button>
                        <span v-if="itemsLeft(product) === 0">All out!</span>
                        <span v-else-if="itemsLeft(product) < 5">Only {{itemsLeft(product)}} left!</span>
                        <span v-else>Buy now!</span>
                    </div>
                </div>
            </div>
            <!-- checkout page in case showLesson is false-->
            <div v-else>
                <h2>Checkout page</h2>
                <!-- Using v model to bind the input so the user can't type numbers in the name box and only number is phone box-->
                <strong>Name: </strong>
                <input type="text" v-model="order.name">
                <strong>Phone Number: </strong>
                <input type="text" v-model="order.phone">
                <!-- displays all items add to cart[] array if displayCart is true(method explained below), also show how many of lessons of a single product were added-->
                <!-- adds a button to delete a single lesson when clicked(remove method explained below)-->
                <h2>Cart: </h2>
                <div v-for="product in products">
                    <span v-if="displayCart(product.id)" v-text="product.title+' x'+lessonCount(product.id)"></span>
                    <button v-if="displayCart(product.id)" v-on:click="remove(product)">Remove</button>
                </div>
                <br>
                <!-- if not typed correctly with just numbers for phone and letters for name the button to finalize the order is disabled-->
                <button disabled="true" v-if="checkoutVali">Order Now!</button>
                <button v-on:click="finalizeOrder" v-else>Order Now!</button>
            </div>
        </main>
    </div>
    <!-- starting of script-->
   
</body>

</html>